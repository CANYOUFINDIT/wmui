<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Object Storage Management - SuanMoFang</title>
    <style>
        /* ------------------------------------------------------------------
           1. Core CSS Variables & Reset
           ------------------------------------------------------------------ */
        :root {
            --c-primary: #4C5DF7;
            --c-primary-hover: #3b4bcc;
            --c-text-main: #303133;
            --c-text-regular: #606266;
            --c-text-secondary: #909399;
            --c-border: #DCDFE6;
            --c-bg-body: #F5F7FA;
            --c-bg-white: #FFFFFF;
            
            --c-success: #67C23A;
            --c-success-bg: #f0f9eb;
            --c-success-border: #e1f3d8;
            --c-danger: #F56C6C;
            --c-danger-bg: #fef0f0;
            --c-danger-border: #fde2e2;
            --c-warning: #E6A23C;
            --c-warning-bg: #fdf6ec;
            --c-warning-border: #faecd8;

            --header-height: 52px;
            --sidebar-width: 200px;
            --drawer-width: 640px;
            --radius-base: 4px;
        }

        * { box-sizing: border-box; outline: none; }
        body {
            margin: 0; padding: 0;
            font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--c-bg-body);
            color: var(--c-text-main);
            font-size: 14px;
            overflow: hidden;
            line-height: 1.5;
        }

        /* ------------------------------------------------------------------
           2. Layout Structure
           ------------------------------------------------------------------ */
        .app-container { display: flex; flex-direction: column; height: 100vh; }
        
        .top-bar {
            height: var(--header-height);
            background: var(--c-bg-white);
            border-bottom: 1px solid #E4E7ED;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px;
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
        }
        .logo { font-weight: 700; font-size: 18px; color: var(--c-primary); display: flex; gap: 10px; align-items: center; }
        
        .side-nav {
            width: var(--sidebar-width);
            background: var(--c-bg-white);
            border-right: 1px solid #E4E7ED;
            position: fixed; top: var(--header-height); bottom: 0; left: 0;
            padding: 16px 8px; z-index: 900;
        }
        .nav-item {
            height: 40px; display: flex; align-items: center; padding: 0 16px;
            margin-bottom: 4px; border-radius: 8px; color: var(--c-text-regular);
            cursor: pointer; font-weight: 500; transition: all 0.2s;
        }
        .nav-item:hover { background: #F5F7FA; color: var(--c-primary); }
        .nav-item.active { background: #eef0ff; color: var(--c-primary); }

        .main-content {
            margin-top: var(--header-height);
            margin-left: var(--sidebar-width);
            padding: 24px;
            height: calc(100vh - var(--header-height));
            overflow-y: auto;
        }

        /* ------------------------------------------------------------------
           3. UI Components
           ------------------------------------------------------------------ */
        .el-button {
            display: inline-flex; justify-content: center; align-items: center;
            height: 32px; padding: 0 16px; font-size: 13px; border-radius: var(--radius-base);
            border: 1px solid var(--c-border); background: #fff; color: var(--c-text-regular);
            cursor: pointer; transition: 0.2s; white-space: nowrap; font-weight: 500;
        }
        .el-button:hover { color: var(--c-primary); border-color: #c6e2ff; background: #ecf5ff; }
        .el-button:disabled { cursor: not-allowed; opacity: 0.6; background: #f5f7fa; border-color: #e4e7ed; color: #c0c4cc; }
        
        .el-button--primary { background: var(--c-primary); border-color: var(--c-primary); color: #fff; }
        .el-button--primary:hover { background: var(--c-primary-hover); color: #fff; border-color: var(--c-primary-hover); }
        .el-button--primary:disabled { background-color: #a0cfff; border-color: #a0cfff; color: #fff; }

        .el-button.is-loading { position: relative; pointer-events: none; }
        .el-button.is-loading::before {
            content: ''; position: absolute; left: 10px; top: 8px;
            width: 12px; height: 12px; border: 2px solid #fff; border-radius: 50%;
            border-top-color: transparent; animation: spin 0.8s linear infinite;
        }
        .el-button.is-loading span { margin-left: 18px; }
        .el-button:not(.el-button--primary).is-loading::before { border-color: var(--c-text-secondary); border-top-color: transparent; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .el-input {
            width: 100%; height: 32px; padding: 0 12px;
            border: 1px solid var(--c-border); border-radius: var(--radius-base);
            color: var(--c-text-main); transition: 0.2s;
        }
        .el-input:focus { border-color: var(--c-primary); box-shadow: 0 0 0 1px var(--c-primary) inset; }
        .el-input.is-error { border-color: var(--c-danger); }

        .el-select {
            width: 100%; height: 32px; padding: 0 12px;
            border: 1px solid var(--c-border); border-radius: var(--radius-base);
            color: var(--c-text-main); background-color: #fff;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23C0C4CC' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat; background-position: right 8px center; background-size: 16px;
            cursor: pointer; transition: 0.2s;
        }

        .el-textarea { width: 100%; padding: 8px 12px; border: 1px solid var(--c-border); border-radius: var(--radius-base); font-family: inherit; resize: vertical; }

        .status-tag { display: inline-flex; align-items: center; justify-content: center; padding: 0 8px; height: 22px; border-radius: 4px; font-size: 12px; border: 1px solid transparent; white-space: nowrap; }
        .status-tag.success { background-color: var(--c-success-bg); border-color: var(--c-success-border); color: var(--c-success); }
        .status-tag.error { background-color: var(--c-danger-bg); border-color: var(--c-danger-border); color: var(--c-danger); }

        /* ------------------------------------------------------------------
           4. Card Grid
           ------------------------------------------------------------------ */
        .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px; margin-top: 20px; }
        
        .info-card {
            background: #fff; border: 1px solid #E4E7ED; border-radius: 8px; 
            padding: 24px 24px 0 24px; /* Footer handles bottom padding */
            transition: all 0.3s;
            display: flex; flex-direction: column; min-height: 220px;
        }
        
        .info-card:hover { box-shadow: 0 12px 32px rgba(0,0,0,0.08); transform: translateY(-3px); }
        
        /* Header */
        .card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .card-title { font-size: 16px; font-weight: 600; color: var(--c-text-main); margin: 0; line-height: 1.2; }
        
        /* Body */
        .card-body { flex: 1; display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
        .card-row { 
            display: flex; font-size: 13px; line-height: 1.6; align-items: center; 
            position: relative; height: 24px;
        }
        
        .row-icon { width: 16px; height: 16px; color: #B3B5B9; margin-right: 8px; flex-shrink: 0; }
        .card-label { color: var(--c-text-secondary); width: 120px; flex-shrink: 0; }
        .card-value { 
            color: var(--c-text-main); word-break: break-all; font-weight: 500; display: flex; align-items: center;
            overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 100%;
        }
        
        /* Description specific style */
        .card-desc-text {
            color: #909399; font-weight: normal; 
            overflow: hidden; text-overflow: ellipsis; white-space: nowrap; width: 100%;
        }

        /* Copy Button */
        .copy-btn {
            opacity: 0; margin-left: 8px; color: var(--c-primary); cursor: pointer;
            transition: opacity 0.2s; width: 14px; height: 14px; flex-shrink: 0;
        }
        .card-row:hover .copy-btn { opacity: 1; }

        /* Footer */
        .card-footer {
            margin-left: -24px; margin-right: -24px;
            padding: 12px 24px;
            background: #fafafa;
            border-top: 1px solid #F0F2F5;
            display: flex; justify-content: space-between; align-items: center;
        }
        .footer-info { font-size: 12px; color: #909399; display: flex; align-items: center; gap: 6px; }

        .error-reason { font-size: 12px; color: var(--c-danger); opacity: 0.85; max-width: 140px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: help; }
        .error-reason::before { content: "•"; margin: 0 6px; color: #DCDFE6; }

        .filter-box { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
        .filter-left { display: flex; gap: 12px; align-items: center; }

        /* ------------------------------------------------------------------
           5. Drawer & Modal
           ------------------------------------------------------------------ */
        .overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.4); z-index: 2000;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .overlay.active { opacity: 1; pointer-events: auto; }

        .drawer {
            position: fixed; top: 0; right: 0; bottom: 0; width: var(--drawer-width);
            background: #fff; box-shadow: -4px 0 16px rgba(0,0,0,0.1);
            transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            z-index: 2001; display: flex; flex-direction: column;
        }
        .drawer.active { transform: translateX(0); }

        .modal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95);
            background: #fff; width: 480px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            z-index: 2002; opacity: 0; pointer-events: none; transition: all 0.2s;
        }
        .modal.active { opacity: 1; pointer-events: auto; transform: translate(-50%, -50%) scale(1); }

        .container-header { padding: 16px 24px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .container-title { font-size: 16px; font-weight: 600; }
        .container-body { flex: 1; padding: 24px; overflow-y: auto; max-height: 80vh; }
        .container-footer { padding: 16px 24px; border-top: 1px solid #eee; background: #fff; display: flex; justify-content: flex-end; gap: 12px; }

        .form-item { margin-bottom: 24px; }
        .form-label { display: block; margin-bottom: 8px; color: var(--c-text-main); font-weight: 500; font-size: 14px; }
        .form-label.required::before { content: '* '; color: #F56C6C; }
        .form-helper { font-size: 12px; color: #909399; margin-top: 6px; line-height: 1.5; }
        .form-helper.highlight { color: var(--c-text-regular); background: #F5F7FA; padding: 8px; border-radius: 4px; margin-top: 8px; border: 1px dashed var(--c-border); }
        .validation-msg { font-size: 12px; color: var(--c-danger); margin-top: 4px; display: none; }
        .validation-msg.visible { display: block; }
        .alert-box { background: var(--c-warning-bg); border: 1px solid var(--c-warning-border); color: var(--c-warning); padding: 8px 16px; border-radius: 4px; font-size: 13px; margin-bottom: 24px; display: flex; gap: 8px; align-items: start; }
        .conn-feedback { margin-top: 12px; padding: 8px 12px; border-radius: 4px; font-size: 13px; display: flex; align-items: center; gap: 8px; }
        .conn-feedback.success { background: var(--c-success-bg); color: var(--c-success); border: 1px solid var(--c-success-border); }
        .conn-feedback.error { background: var(--c-danger-bg); color: var(--c-danger); border: 1px solid var(--c-danger-border); }
        .input-group { display: flex; }
        .input-group .el-input { border-top-right-radius: 0; border-bottom-right-radius: 0; flex: 2; }
        .input-group select { flex: 1; border-top-left-radius: 0; border-bottom-left-radius: 0; border-left: 0; background: #F5F7FA; text-align: center; border: 1px solid var(--c-border); border-radius: 0 4px 4px 0; color: var(--c-text-main); height: 32px; }
        .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #dcdfe6; transition: .4s; border-radius: 20px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--c-primary); }
        input:checked + .slider:before { transform: translateX(20px); }
        .hidden { display: none; }
    </style>
</head>
<body>

<svg style="display: none;">
    <symbol id="icon-globe" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></symbol>
    <symbol id="icon-server" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></symbol>
    <symbol id="icon-database" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></symbol>
    <symbol id="icon-map" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></symbol>
    <symbol id="icon-cube" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></symbol>
    <symbol id="icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></symbol>
    <symbol id="icon-copy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></symbol>
    <symbol id="icon-file-text" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></symbol>
</svg>

<div class="app-container">
    <header class="top-bar">
        <div class="logo">
            <span style="font-size:20px;">⚡</span>
            <span>SuanMoFang</span>
        </div>
        <div style="display:flex; gap:15px; align-items:center;">
            <button class="el-button" onclick="toggleLang()">EN / 中文</button>
            <div style="width:32px; height:32px; background:#4C5DF7; border-radius:50%; color:#fff; display:flex; align-items:center; justify-content:center; font-size:12px;">AD</div>
        </div>
    </header>

    <nav class="side-nav">
        <div class="nav-item">
            <span data-i18n="nav_compute">算力资源池</span>
        </div>
        <div class="nav-item active">
            <span data-i18n="nav_storage">对象存储组件</span>
        </div>
        <div class="nav-item">
            <span data-i18n="nav_image">镜像管理</span>
        </div>
    </nav>

    <main class="main-content">
        <div style="margin-bottom: 20px;">
            <h2 style="font-size: 20px; margin: 0 0 4px 0;" data-i18n="page_title">对象存储组件</h2>
            <p style="font-size: 12px; color: #909399; margin-top: 4px;" data-i18n="page_desc">管理平台级对象存储接入点（MinIO），为地域提供基础存储能力。</p>
        </div>

        <div class="filter-box">
            <div class="filter-left">
                <input type="text" class="el-input" style="width: 240px;" placeholder="请输入名称" data-i18n-placeholder="ph_search_name">
                <button class="el-button el-button--primary" data-i18n="btn_search">搜索</button>
            </div>
            <button class="el-button el-button--primary" onclick="openDrawer()" data-i18n="btn_register">
                + 注册组件
            </button>
        </div>

        <div class="card-grid">
            
            <div class="info-card">
                <div class="card-header">
                    <h3 class="card-title">minio-prod-wh</h3>
                    <span class="status-tag success" data-i18n="status_normal">正常</span>
                </div>

                <div class="card-body">
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-globe"></use></svg>
                        <span class="card-label" data-i18n="card_endpoint">访问端点:</span>
                        <span class="card-value">https://minio.icsb.shop <svg class="copy-btn" onclick="copyText('https://minio.icsb.shop')"><use href="#icon-copy"></use></svg></span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-server"></use></svg>
                        <span class="card-label" data-i18n="card_ip">IP 地址:</span>
                        <span class="card-value">http://192.168.5.195:9000 <svg class="copy-btn" onclick="copyText('http://192.168.5.195:9000')"><use href="#icon-copy"></use></svg></span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-database"></use></svg>
                        <span class="card-label" data-i18n="card_max_size">单桶容量上限:</span>
                        <span class="card-value">5 TB</span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-cube"></use></svg>
                        <span class="card-label" data-i18n="card_buckets">桶数量:</span>
                        <span class="card-value">5 (<span data-i18n="val_tenant">单租户</span>)</span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-map"></use></svg>
                        <span class="card-label" data-i18n="card_region">关联地域:</span>
                        <span class="card-value" data-i18n="val_wuhan">武汉</span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-file-text"></use></svg>
                        <span class="card-label" data-i18n="card_desc">描述:</span>
                        <span class="card-desc-text">Primary storage cluster for AI training datasets (Wuhan Region).</span>
                    </div>
                </div>

                <div class="card-footer">
                    <div class="footer-info">
                        <svg class="row-icon" style="width:14px; height:14px;"><use href="#icon-clock"></use></svg>
                        <span>2026-02-02 10:30:00</span>
                    </div>
                    <button class="el-button" onclick="openEditModal(1)" data-i18n="btn_edit_quota">编辑额度</button>
                </div>
            </div>

            <div class="info-card">
                <div class="card-header">
                    <h3 class="card-title">minio-dev-test</h3>
                    <span class="status-tag error" data-i18n="status_invalid">失效</span>
                    <span class="error-reason" title="Connection timed out: 504 Gateway Timeout">Connection timed out...</span>
                </div>

                <div class="card-body">
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-globe"></use></svg>
                        <span class="card-label" data-i18n="card_endpoint">访问端点:</span>
                        <span class="card-value">https://dev.minio.local <svg class="copy-btn" onclick="copyText('https://dev.minio.local')"><use href="#icon-copy"></use></svg></span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-server"></use></svg>
                        <span class="card-label" data-i18n="card_ip">IP 地址:</span>
                        <span class="card-value">http://10.0.0.45:9000 <svg class="copy-btn" onclick="copyText('http://10.0.0.45:9000')"><use href="#icon-copy"></use></svg></span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-database"></use></svg>
                        <span class="card-label" data-i18n="card_max_size">单桶容量上限:</span>
                        <span class="card-value">1 TB</span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-cube"></use></svg>
                        <span class="card-label" data-i18n="card_buckets">桶数量:</span>
                        <span class="card-value">10 (<span data-i18n="val_tenant">单租户</span>)</span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-map"></use></svg>
                        <span class="card-label" data-i18n="card_region">关联地域:</span>
                        <span class="card-value">-</span>
                    </div>
                    <div class="card-row">
                        <svg class="row-icon"><use href="#icon-file-text"></use></svg>
                        <span class="card-label" data-i18n="card_desc">描述:</span>
                        <span class="card-desc-text">Test environment.</span>
                    </div>
                </div>

                <div class="card-footer">
                    <div class="footer-info">
                        <svg class="row-icon" style="width:14px; height:14px;"><use href="#icon-clock"></use></svg>
                        <span>2026-02-01 14:20:15</span>
                    </div>
                    <button class="el-button" onclick="openEditModal(2)" data-i18n="btn_edit_quota">编辑额度</button>
                </div>
            </div>

        </div>
    </main>
</div>

<div class="overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
<div class="drawer" id="drawerRegister">
    <div class="container-header">
        <span class="container-title" data-i18n="drawer_title">注册对象存储组件</span>
        <span style="cursor:pointer; font-size:24px; color:#909399;" onclick="closeDrawer()">×</span>
    </div>
    <div class="container-body">
        <div class="alert-box">
            <span style="font-size:16px;">ⓘ</span>
            <div>
                <strong data-i18n="hint_title">提示：</strong>
                <span data-i18n="hint_content">对象存储组件为地域级私有能力，一旦被某个地域引用，将无法再被其他地域使用。</span>
            </div>
        </div>
        <div class="form-item">
            <label class="form-label required" data-i18n="lbl_name">名称</label>
            <input type="text" class="el-input" id="regName" placeholder="minio-prod-wh" oninput="validateName(this)">
            <div class="validation-msg" id="regNameErr" data-i18n="err_name_format">格式错误：3-63个字符；仅支持小写字母、数字、点(.)和连字符(-)</div>
            <div class="form-helper highlight" data-i18n="help_name">平台内唯一标识。规范：<br>1. 长度 3-63 个字符<br>2. 只能由小写字母、数字、点(.)和连字符(-)组成</div>
        </div>
        <div class="form-item">
            <label class="form-label required" data-i18n="lbl_endpoint">访问端点</label>
            <input type="text" class="el-input" id="regEndpoint" placeholder="https://minio.example.com" oninput="resetTest()">
            <div class="form-helper" data-i18n="help_endpoint">对象存储的外部访问地址，建议填写稳定可访问的域名。</div>
        </div>
        <div class="form-item">
            <label class="form-label required" data-i18n="lbl_ip">IP 地址</label>
            <input type="text" class="el-input" id="regIP" placeholder="http://10.0.x.x:9000" oninput="resetTest()">
            <div class="form-helper" data-i18n="help_ip">集群内部访问地址，供 Pod 和平台服务使用。</div>
        </div>
        <div style="border-top:1px dashed #eee; margin: 24px 0;"></div>
        <div class="form-item">
            <label class="form-label required" data-i18n="lbl_ak">Access Key</label>
            <input type="text" class="el-input" id="regAK" placeholder="minioadmin" oninput="resetTest()">
            <div class="form-helper" data-i18n="help_ak">平台统一管理的访问标识。</div>
        </div>
        <div class="form-item">
            <label class="form-label required" data-i18n="lbl_sk">Secret Key</label>
            <input type="password" class="el-input" id="regSK" placeholder="••••••••" oninput="resetTest()">
            <div class="form-helper" data-i18n="help_sk">用于签名的密钥，平台将加密存储。</div>
        </div>

        <div class="form-item">
            <button type="button" class="el-button" id="btnTestConn" onclick="testConnection()">
                <span data-i18n="btn_test">测试连接</span>
            </button>
            <div id="connFeedback" class="conn-feedback hidden"></div>
        </div>

        <div style="border-top:1px dashed #eee; margin: 24px 0;"></div>
        <div class="form-item">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <label class="form-label" style="margin-bottom:0;" data-i18n="lbl_limit_switch">限制存储额度</label>
                <label class="switch"><input type="checkbox" id="quotaSwitch" onchange="toggleQuota()"><span class="slider"></span></label>
            </div>
            <div class="form-helper" data-i18n="help_limit_switch">开启后，将限制单个桶的容量及租户可创建的桶数量。</div>
        </div>
        <div id="quotaArea" class="hidden" style="background:#F5F7FA; padding:16px; border-radius:6px; margin-bottom: 24px;">
            <div style="display:flex; gap:16px;">
                <div class="form-item" style="flex:2;">
                    <label class="form-label required" data-i18n="lbl_bucket_quota">单桶容量上限</label>
                    <input type="number" class="el-input" placeholder="1024">
                </div>
                <div class="form-item" style="flex:1;">
                    <label class="form-label required" data-i18n="lbl_unit">单位</label>
                    <select class="el-select"><option>GB</option><option>TB</option></select>
                </div>
            </div>
            <div class="form-item" style="margin-bottom:0;">
                <label class="form-label required" data-i18n="lbl_tenant_buckets">桶数量 (单租户)</label>
                <input type="number" class="el-input" placeholder="10">
            </div>
        </div>
        <div class="form-item">
            <label class="form-label" data-i18n="lbl_desc">描述</label>
            <textarea class="el-textarea" rows="3" placeholder="..."></textarea>
        </div>
    </div>
    <div class="container-footer">
        <button class="el-button" onclick="closeDrawer()" data-i18n="btn_cancel">取消</button>
        <button class="el-button el-button--primary" id="btnSubmitReg" onclick="submitRegister()" data-i18n="btn_submit">确定注册</button>
    </div>
</div>

<div class="overlay" id="modalOverlay"></div>
<div class="modal" id="editModal">
    <div class="container-header">
        <span class="container-title" data-i18n="edit_title">编辑对象存储额度</span>
        <span style="cursor:pointer; font-size:24px; color:#909399;" onclick="closeEditModal()">×</span>
    </div>
    <div class="container-body" style="max-height: auto;">
        <div class="form-item">
            <label class="form-label required" data-i18n="edit_size">单桶容量上限</label>
            <div class="input-group">
                <input type="number" class="el-input" value="5">
                <select><option>TB</option><option>GB</option></select>
            </div>
            <div class="form-helper" data-i18n="edit_help_size">单个存储桶允许使用的最大容量。</div>
        </div>
        <div class="form-item">
            <label class="form-label required" data-i18n="edit_count">桶数量 (单租户)</label>
            <input type="number" class="el-input" value="5">
            <div class="form-helper" data-i18n="edit_help_count">单个租户最多可创建的桶数量。</div>
        </div>
    </div>
    <div class="container-footer">
        <button class="el-button" onclick="closeEditModal()" data-i18n="btn_cancel">取消</button>
        <button class="el-button el-button--primary" onclick="submitEdit()" data-i18n="btn_save">保存</button>
    </div>
</div>

<script>
    let currentLang = 'zh';
    const dict = {
        zh: {
            nav_compute: "算力资源池", nav_storage: "对象存储组件", nav_image: "镜像管理",
            page_title: "对象存储组件", page_desc: "管理平台级对象存储接入点（MinIO），为地域提供基础存储能力。",
            ph_search_name: "请输入名称", btn_search: "搜索", btn_register: "+ 注册组件",
            btn_cancel: "取消", btn_submit: "确定注册", btn_save: "保存", btn_edit_quota: "编辑额度",
            btn_test: "测试连接",
            
            card_endpoint: "访问端点:", card_ip: "IP 地址:", card_max_size: "单桶容量上限:", 
            card_buckets: "桶数量:", status_normal: "正常", status_invalid: "失效",
            card_region: "关联地域:", card_time: "更新时间:", card_desc: "描述:", val_tenant: "单租户", val_wuhan: "武汉",

            drawer_title: "注册对象存储组件", hint_title: "提示：",
            hint_content: "对象存储组件为地域级私有能力，一旦被某个地域引用，将无法再被其他地域使用。",
            lbl_name: "名称", help_name: "平台内唯一标识。规范：<br>1. 长度 3-63 个字符<br>2. 只能由小写字母、数字、点(.)和连字符(-)组成",
            err_name_format: "格式错误：3-63个字符；仅支持小写字母、数字、点(.)和连字符(-)",
            lbl_endpoint: "访问端点", help_endpoint: "对象存储的外部访问地址，建议填写稳定可访问的域名。",
            lbl_ip: "IP 地址", help_ip: "集群内部访问地址，供 Pod 和平台服务使用。",
            lbl_ak: "Access Key", help_ak: "平台统一管理的访问标识。",
            lbl_sk: "Secret Key", help_sk: "用于签名的密钥，平台将加密存储。",
            lbl_limit_switch: "限制存储额度", help_limit_switch: "开启后，将限制单个桶的容量及租户可创建的桶数量。",
            lbl_bucket_quota: "单桶容量上限", lbl_unit: "单位", lbl_tenant_buckets: "桶数量 (单租户)",
            lbl_desc: "描述",
            
            msg_test_success: "连接测试成功", msg_test_fail: "连接失败: 认证拒绝 (403)", msg_fill_conn: "请先填写完整的连接信息",

            edit_title: "编辑对象存储额度", edit_size: "单桶容量上限", edit_help_size: "单个存储桶允许使用的最大容量。",
            edit_count: "桶数量 (单租户)", edit_help_count: "单个租户最多可创建的桶数量。"
        },
        en: {
            nav_compute: "Compute Pools", nav_storage: "Object Storage", nav_image: "Images",
            page_title: "Object Storage Components", page_desc: "Manage platform-level MinIO endpoints.",
            ph_search_name: "Enter name", btn_search: "Search", btn_register: "+ Register",
            btn_cancel: "Cancel", btn_submit: "Confirm", btn_save: "Save", btn_edit_quota: "Edit Quota",
            btn_test: "Test Connection",
            
            card_endpoint: "Endpoint:", card_ip: "IP Addr:", card_max_size: "Max Bucket Size:",
            card_buckets: "Buckets:", status_normal: "Normal", status_invalid: "Invalid",
            card_region: "Region:", card_time: "Update Time:", card_desc: "Desc:", val_tenant: "Per Tenant", val_wuhan: "Wuhan",

            drawer_title: "Register Component", hint_title: "Note:",
            hint_content: "Region-private capability. Once referenced, it cannot be reused.",
            lbl_name: "Name", help_name: "Rules:<br>1. Length 3-63<br>2. Lowercase, numbers, dot(.) and hyphen(-) only",
            err_name_format: "Invalid: 3-63 chars; lowercase, numbers, dot(.) & hyphen(-) only",
            lbl_endpoint: "External Endpoint", help_endpoint: "External address (HTTPS) for SDKs/CLI.",
            lbl_ip: "IP Address", help_ip: "Internal cluster address for Pods.",
            lbl_ak: "Access Key", help_ak: "Access ID managed by platform.",
            lbl_sk: "Secret Key", help_sk: "Secret key for signing, stored encrypted.",
            lbl_limit_switch: "Limit Quota", help_limit_switch: "If enabled, limits bucket capacity and count.",
            lbl_bucket_quota: "Max Bucket Size", lbl_unit: "Unit", lbl_tenant_buckets: "Buckets (Per Tenant)",
            lbl_desc: "Description",

            msg_test_success: "Connection Verified", msg_test_fail: "Connection Failed: Auth Rejected (403)", msg_fill_conn: "Please fill connection info first",

            edit_title: "Edit Storage Quota", edit_size: "Max Bucket Size", edit_help_size: "Maximum capacity allowed per bucket.",
            edit_count: "Buckets (Per Tenant)", edit_help_count: "Max buckets a single tenant can create."
        }
    };

    function toggleLang() {
        currentLang = currentLang === 'zh' ? 'en' : 'zh';
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (dict[currentLang][key]) el.innerHTML = dict[currentLang][key];
        });
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            if (dict[currentLang][key]) el.placeholder = dict[currentLang][key];
        });
    }

    // Logic
    function openDrawer() {
        document.getElementById('drawerOverlay').classList.add('active');
        document.getElementById('drawerRegister').classList.add('active');
        const nameInput = document.getElementById('regName');
        nameInput.value = ''; nameInput.classList.remove('is-error');
        document.getElementById('regNameErr').classList.remove('visible');
        resetTest();
    }
    function closeDrawer() {
        document.getElementById('drawerOverlay').classList.remove('active');
        document.getElementById('drawerRegister').classList.remove('active');
    }
    function toggleQuota() {
        const isChecked = document.getElementById('quotaSwitch').checked;
        const area = document.getElementById('quotaArea');
        isChecked ? area.classList.remove('hidden') : area.classList.add('hidden');
    }
    function validateName(input) {
        const regex = /^[a-z0-9.-]{3,63}$/;
        const err = document.getElementById('regNameErr');
        if (input.value.length > 0 && !regex.test(input.value)) {
            input.classList.add('is-error'); err.classList.add('visible');
        } else {
            input.classList.remove('is-error'); err.classList.remove('visible');
        }
    }
    
    // Test Connection Logic
    function resetTest() {
        const feedback = document.getElementById('connFeedback');
        const submitBtn = document.getElementById('btnSubmitReg');
        feedback.classList.add('hidden');
        feedback.className = 'conn-feedback hidden';
        submitBtn.disabled = false;
    }

    function testConnection() {
        const ep = document.getElementById('regEndpoint').value;
        const sk = document.getElementById('regSK').value;
        const feedback = document.getElementById('connFeedback');
        const btn = document.getElementById('btnTestConn');
        const submitBtn = document.getElementById('btnSubmitReg');
        
        if(!ep || !sk) { alert(dict[currentLang].msg_fill_conn); return; }

        btn.classList.add('is-loading');
        btn.innerHTML = '<span>' + (currentLang === 'zh' ? '测试中...' : 'Testing...') + '</span>';
        feedback.classList.add('hidden');
        submitBtn.disabled = true;

        setTimeout(() => {
            btn.classList.remove('is-loading');
            btn.innerHTML = '<span data-i18n="btn_test">' + dict[currentLang].btn_test + '</span>';
            feedback.classList.remove('hidden');

            if(sk.includes('error')) {
                feedback.className = 'conn-feedback error';
                feedback.innerHTML = '✕ ' + dict[currentLang].msg_test_fail;
                submitBtn.disabled = true;
            } else {
                feedback.className = 'conn-feedback success';
                feedback.innerHTML = '✓ ' + dict[currentLang].msg_test_success;
                submitBtn.disabled = false;
            }
        }, 800);
    }

    function submitRegister() {
        const nameInput = document.getElementById('regName');
        if (nameInput.classList.contains('is-error') || !nameInput.value) {
            nameInput.classList.add('is-error'); return;
        }
        alert(currentLang === 'zh' ? '注册成功' : 'Registered Successfully'); closeDrawer();
    }
    function openEditModal(id) {
        document.getElementById('modalOverlay').classList.add('active');
        document.getElementById('editModal').classList.add('active');
    }
    function closeEditModal() {
        document.getElementById('modalOverlay').classList.remove('active');
        document.getElementById('editModal').classList.remove('active');
    }
    function submitEdit() {
        alert(currentLang === 'zh' ? '额度更新成功' : 'Quota Updated Successfully'); closeEditModal();
    }
    function copyText(text) {
        navigator.clipboard.writeText(text).then(() => {
            alert('Copied: ' + text);
        });
    }
</script>
</body>
</html>